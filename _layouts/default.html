<!DOCTYPE html>
<html lang="en">
  <header>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <!-- Basic favicon -->
    <link rel="shortcut icon" href="{{ site.baseurl }}/assets/favicon.ico" />
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <title>
      {% if page.url == '/' %}
        {{ site.title | escape }}
      {% elsif page.title %}
        {{ page.title | escape }} - {{ site.title | escape }}
      {% else %}
        {{ site.title | escape }}
      {% endif %}
    </title>
    <link rel="stylesheet" href="{{ site.baseurl }}/assets/css/style.css" />
  </header>
  <nav aria-label="breadcrumb">
    <ol class="breadcrumb">
      <!-- Home link -->
      <li class="breadcrumb-item {% if page.url == '/' %}active{% endif %}">
        {% if page.url == '/' %}
          Home
        {% else %}
          <a href="{{ site.baseurl }}/">Home</a>
        {% endif %}
      </li>

      <!-- Categories in site.categories -->
      {% for category in site.categories %}
        <!-- ...existing category code... -->
      {% endfor %}

      <!-- For posts and other pages - revised logic -->
      {% if page.layout == "post" %}
        <!-- For post pages with category -->
        {% if page.categories %}
          {% for category in page.categories %}
            <li class="breadcrumb-item"></li>
              <a href="{{ site.baseurl }}/{{ category | downcase }}/">{{ category | capitalize }}</a>
            </li>
          {% endfor %}
        {% endif %}

        <!-- Current post title -->
        <li class="breadcrumb-item active" aria-current="page"></li>
          {{ page.title }}
        </li>
      {% else %}
        <!-- Fallback to URL-based breadcrumbs for non-post pages -->
        {% assign url_parts = page.url | split: '/' %}
        {% if url_parts.size > 1 %}
          {% for part in url_parts %}
            {% if forloop.first %}{% continue %}{% endif %}

            {% assign is_last = forloop.last %}
            {% capture slug %}{{ part }}{% endcapture %}

            {% if slug != "" %}
              {% capture breadcrumb_path %}
                {{ site.baseurl }}{% for path_part in url_parts offset:0 limit:forloop.index %}
                  {% if path_part != "" %}/{{ path_part }}{% endif %}
                {% endfor %}
              {% endcapture %}

              <li class="breadcrumb-item {% if is_last %}active{% endif %}"
                  {% if is_last %}aria-current="page"{% endif %}>
                {% if is_last and page.title %}
                  {{ page.title }}
                {% elsif is_last %}
                  {{ slug | capitalize | replace: '-', ' ' }}
                {% else %}
                  <a href="{{ breadcrumb_path }}/">{{ slug | capitalize | replace: '-', ' ' }}</a>
                {% endif %}
              </li>
            {% endif %}
          {% endfor %}
        {% endif %}
      {% endif %}
    </ol>
  </nav>
  <body class="vscode-body">
    <main>{{ content }}</main>
    <footer>
      <p>&copy; {{ site.time | date: '%Y' }} - {{ site.title }}</p>
    </footer>
  </body>
</html>
